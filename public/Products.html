<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Permanent+Marker&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Berkshire+Swash&family=Frijole&family=Open+Sans&family=Ultra&display=swap" rel="stylesheet">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Berkshire+Swash&family=Frijole&family=Oi&family=Open+Sans&family=Ultra&display=swap" rel="stylesheet">
<link rel="stylesheet" href="./css/getAllProducts.css">
    <title>getAllProducts</title>

</head>
<body>
    <header>
        <section>
            <img id="separator" src="../images/separator.jpg">  
            <article id="bg1"></article>
        <h1 id="title">Get All Products</h1>
            <img id="myLogo" src="../images/logo3.png">
            <ul>
                <a class="myNav" href="/"><li>Home-Page <i class="fa fa-home"></i></li></a>
                <a class="myNav" href="clothing.html"><li>clothing <i class="fa fa-shopping-bag"></i></li></a>
                <a class="myNav" href="home&living.html"><li>Home&living <i class="fa fa-shopping-basket"></i></li></a>
                <a class="myNav" href="jewelry&accessories.html"><li>Jewelry&Accessories <i class="fa fa-diamond"></i></li></a>
                <a class="myNav" href="paintings.html"><li>Paintings <i class="fa fa-paint-brush"></i></li></a>
                <a class="myNav" href="cart.html"><li>Shopping cart  <i class="fa fa-shopping-cart"></i></li></a>
                <a class="myNav" href="contacts.html"><li>Contact 
                    <i class="fa fa-phone"></i></li></a>
               </ul>        
           <nav> 
           <img id="separator" src="../images/separator.jpg">
         </nav>
<a id="add" href="./addProduct.html">Add Product</a>
</section> 
<div id="imagesContainer"></div>
    </section>
    </main>
        <footer>
        </footer>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.23.0/axios.min.js"
        integrity="sha512-Idr7xVNnMWCsgBQscTSCivBNWWH30oo/tzYORviOCrLKmBaRxRflm2miNhTFJNVmXvCtzgms5nlJF4az2hiGnA=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script>
 function getAllProducts() {
            axios
                .get("/products")
                .then(function (response) {
                    const products = response.data;
                console.log(response.data);
                const allProducts=document.getElementById("imagesContainer")
                for(let i=0;i<products.length;i++){
                    allProducts.innerHTML+=`<div class="imagesContainer">
    <button onclick="prevImage()"  class="prev"><a>&#10094;</a></button>
    <img class="firstImage" src="${products[i].image1}">
     <button class="next"><a>&#10095;</a></button><br>
      <h3 class="info"> category : ${products[i].category}<br> id : ${products[i].id}<br> name : ${products[i].name}<br> price : ${products[i].price}$<br> description : ${products[i].description}<h3>
      </div>`
}
var prev = document.getElementsByClassName("prev");
    var next = document.getElementsByClassName("next");
    var firstImage = document.getElementsByClassName("firstImage");
    var secondImage = document.getElementsByClassName("secondImage");
    function prevImage() {
        for (let i = 0; i < prev.length; i++) {
            let counter = 0;
            prev[i].addEventListener("click", () => {
                switch (counter) {
                    case 0:
                        firstImage[i].src = `${products[i].image2}`
                        counter = 0
    
                        break;
                    case 1:
                        firstImage[i].src = `${products[i].image1}`
                        counter = 1
                        break;
                }
            });
        }
    }
    prevImage()
    function nextImage() {
        for (let i = 0; i < next.length; i++) {
            let counter = 0;
            next[i].addEventListener("click", () => {
                switch (counter) {
                    case 0:
                        firstImage[i].src = `${products[i].image2}`
                        counter = 1
    
                        break;
                    case 1:
                        firstImage[i].src = `${products[i].image1}`
                        counter = 0
                        break;
                }
            });
        }
    }
    nextImage()
})
.catch(function (error) {
console.log(error);
});
        }
getAllProducts()
    </script>
</body>
</html>